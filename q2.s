	AREA RESET,DATA,READONLY
	EXPORT  __Vectors
__Vectors
	DCD 0x10001000
	DCD Reset_Handler
	ALIGN
	
	AREA mycode,CODE,READONLY
	ENTRY
	EXPORT Reset_Handler
Reset_Handler
	LDR R0,=num1
	LDR R1,=num2
	LDR R0,[R0]
	LDR R1,[R1]
	MOV R2,#0
	MOV R3,#0
UP	MOV R4,R2
	MOV R5,R0
	BL ADD_BCD
	MOV R2,R7
	MOV R4,R3
	MOV R5,R8
	BL ADD_BCD
	MOV R3,R7
	SUB R1,#1
	TEQ R1,#0
	BNE UP
	LDR R0,=0x10000000
	STR R2,[R0],#4
	STR R3,[R0]
STOP B STOP
ADD_BCD	
	MOV R6,#8
	MOV R7,#0
	MOV R8,#0
UP1	MOV R9,R4
	MOV R10,R5
	AND R9,#0x0F
	AND R10,#0x0F
	ADD R11,R9,R10
	ADD R11,R11,R8
	CMP R11,#0x0A
	BLO Skip
	SUB R11,#0x0A
	MOV R8,#1
	B down
Skip	MOV R8,#0
down	
	LSR R4,#4
	LSR R5,#4
	ORR R7,R11
	ROR R7,#4
	SUB R6,#1
	TEQ R6,#0
	BNE UP1
	BX LR
	AREA mydata,DATA,READONLY
num1 DCD 0x12345678
num2 DCD 100
	END
	
